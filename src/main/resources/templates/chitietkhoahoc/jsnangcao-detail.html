<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<!-- Previous head section remains the same -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Nâng Cao - Chi tiết khóa học</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/header.css">
    <link rel="stylesheet" href="../css/footer.css">
    <link rel="stylesheet" href="../css/style.css">
    <style>
        /* Previous styles remain the same */
        .course-content {
            padding-top: 80px;
            background-color: #f8f9fa;
            min-height: calc(100vh - 200px);
        }
        
        .video-section {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .video-container {
            position: relative;
            padding-bottom: 45%;
            height: 0;
            overflow: hidden;
            border-radius: 8px 8px 0 0;
        }
        
        .video-container video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #f8f9fa;
        }
        
        .lesson-content {
            padding: 20px;
        }
        
        .lesson-list {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .lesson-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .lesson-item:hover {
            background-color: #f8f9fa;
        }
        
        .lesson-item.active {
            background-color: #e9ecef;
            border-left: 4px solid var(--primary-color);
        }
        
        .lesson-title {
            font-weight: 500;
            margin-bottom: 5px;
            color: #333;
        }
        
        .lesson-duration {
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        .lesson-description {
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .chapter-title {
            padding: 15px;
            background: var(--primary-color);
            color: #fff;
            font-weight: 500;
            border-radius: 8px 8px 0 0;
        }
        
        .nav-buttons {
            margin-top: 20px;
        }
        
        .btn-custom {
            background-color: var(--primary-color);
            color: #fff;
            padding: 8px 20px;
            border-radius: 5px;
            border: none;
            transition: all 0.3s ease;
        }
        
        .btn-custom:hover {
            background-color: var(--primary-dark);
            color: #fff;
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .btn-outline:hover {
            background: var(--primary-color);
            color: #fff;
        }

        .code-example {
            background: #2d2d2d;
            color: #fff;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="/">HỌC LẬP TRÌNH</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Trang chủ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/dskhoahoc.html">Khóa học</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/news.html">Tin tức</a>
                    </li>
                </ul>
                <div class="ms-3">
                    <span sec:authorize="isAuthenticated()">Xin chào<span th:text="${#authentication.name}"></span></span>
                    <a th:href="@{/logout}" sec:authorize="isAuthenticated()" class="btn btn-custom ms-2">Đăng xuất</a>
                    <a th:href="@{/login}" sec:authorize="!isAuthenticated()" class="btn btn-custom">Đăng nhập</a>
                    <a th:href="@{/register}" sec:authorize="!isAuthenticated()" class="btn btn-outline ms-2">Đăng ký</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Course Content -->
    <div class="course-content">
        <div class="container">
            <div class="row">
                <!-- Main Content (80%) -->
                <div class="col-lg-9">
                    <!-- Video Section -->
                    <div class="video-section">
                        <div class="video-container">
                            <video controls id="lessonVideo">
                                <source src="" type="video/mp4">
                                Trình duyệt của bạn không hỗ trợ thẻ video.
                            </video>
                        </div>
                        <div class="lesson-content">
                            <h2 id="currentLessonTitle" class="mb-4">1.1 Giới thiệu JavaScript Nâng cao</h2>
                            
                            <!-- Lesson 1.1 Content -->
                            <div id="lesson1-1" class="lesson-description">
                                <h3 class="h5 mb-3">Nội dung bài học</h3>
                                <p class="mb-4">
                                    Trong bài học đầu tiên, chúng ta sẽ tìm hiểu tổng quan về JavaScript và các khái niệm nâng cao.
                                    Khám phá cách JavaScript hoạt động và những điểm độc đáo của ngôn ngữ này.
                                </p>
                                <div class="key-points mb-4">
                                    <h4 class="h6">Những điểm chính:</h4>
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-check text-success me-2"></i>JavaScript Engine và cách nó hoạt động</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Event Loop và bất đồng bộ</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Scope và Execution Context</li>
                                    </ul>
                                </div>
                            </div>

                            <!-- Lesson 1.2 Content -->
                            <div id="lesson1-2" class="lesson-description" style="display: none;">
                                <h3 class="h5 mb-3">Nội dung bài học</h3>
                                <p class="mb-4">
                                    Tìm hiểu chi tiết về Closures và Scope trong JavaScript. Khám phá cách Closure 
                                    giúp bảo vệ dữ liệu và tạo private variables trong JavaScript.
                                </p>
                                <div class="key-points mb-4">
                                    <h4 class="h6">Những điểm chính:</h4>
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-check text-success me-2"></i>Closure là gì và cách hoạt động</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Scope chain và lexical scope</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Private data với closure</li>
                                    </ul>
                                </div>
                                <div class="code-example">
<pre>
function createCounter() {
    let count = 0;  // Private variable
    return {
        increment() { return ++count; },
        decrement() { return --count; },
        getCount() { return count; }
    };
}

const counter = createCounter();
console.log(counter.increment()); // 1
console.log(counter.increment()); // 2
console.log(counter.getCount()); // 2
</pre>
                                </div>
                            </div>

                            <!-- Lesson 1.3 Content -->
                            <div id="lesson1-3" class="lesson-description" style="display: none;">
                                <h3 class="h5 mb-3">Nội dung bài học</h3>
                                <p class="mb-4">
                                    IIFE (Immediately Invoked Function Expression) là một pattern quan trọng trong JavaScript.
                                    Học cách sử dụng IIFE để tạo scope riêng và tránh ô nhiễm global scope.
                                </p>
                                <div class="key-points mb-4">
                                    <h4 class="h6">Những điểm chính:</h4>
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-check text-success me-2"></i>IIFE Pattern và cách sử dụng</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Module Pattern với IIFE</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Ứng dụng thực tế của IIFE</li>
                                    </ul>
                                </div>
                                <div class="code-example">
<pre>
// Module Pattern using IIFE
const calculator = (function() {
    let result = 0;  // Private state
    
    return {
        add(x) {
            result += x;
            return this;
        },
        subtract(x) {
            result -= x;
            return this;
        },
        getResult() {
            return result;
        }
    };
})();

calculator.add(5).subtract(2);
console.log(calculator.getResult()); // 3
</pre>
                                </div>
                            </div>

                            <div class="nav-buttons d-flex justify-content-between">
                                <button class="btn btn-custom" id="prevLesson">
                                    <i class="fas fa-chevron-left"></i> Bài trước
                                </button>
                                <button class="btn btn-custom" id="nextLesson">
                                    Bài tiếp theo <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lesson List (20%) -->
                <div class="col-lg-3">
                    <div class="lesson-list">
                        <div class="chapter-title">
                            <i class="fas fa-book me-2"></i>Nội dung khóa học
                        </div>
                        <div class="lesson-items">
                            <div class="lesson-item active" data-lesson="1-1">
                                <div class="lesson-title">1.1 Giới thiệu JavaScript Nâng cao</div>
                                <div class="lesson-duration">
                                    <i class="far fa-clock me-1"></i>20 phút
                                </div>
                            </div>
                            <div class="lesson-item" data-lesson="1-2">
                                <div class="lesson-title">1.2 Closures và Scope</div>
                                <div class="lesson-duration">
                                    <i class="far fa-clock me-1"></i>25 phút
                                </div>
                            </div>
                            <div class="lesson-item" data-lesson="1-3">
                                <div class="lesson-title">1.3 IIFE Pattern</div>
                                <div class="lesson-duration">
                                    <i class="far fa-clock me-1"></i>30 phút
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <div class="footer-content">
                        <h3 class="footer-title">Về chúng tôi</h3>
                        <p>Học Lập trình Online - Nơi chắp cánh ước mơ lập trình viên với các khóa học chất lượng cao.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="footer-content">
                        <h3 class="footer-title">Liên kết nhanh</h3>
                        <div class="footer-links">
                            <a href="/courses">Khóa học</a>
                            <a href="/news">Tin tức</a>
                            <a href="/register">Đăng ký</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="footer-content">
                        <h3 class="footer-title">Kết nối</h3>
                        <div class="social-links">
                            <a href="#"><i class="fab fa-facebook"></i></a>
                            <a href="#"><i class="fab fa-instagram"></i></a>
                            <a href="#"><i class="fab fa-youtube"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <p>© 2025 Học Lập trình Online. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- AOS Animation -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();

        function hideAllLessons() {
            document.querySelectorAll('.lesson-description').forEach(desc => {
                desc.style.display = 'none';
            });
        }

        function showLesson(lessonId) {
            hideAllLessons();
            const lessonElement = document.getElementById(`lesson${lessonId}`);
            if (lessonElement) {
                lessonElement.style.display = 'block';
            }
        }

        // Lesson navigation
        document.querySelectorAll('.lesson-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.lesson-item').forEach(i => i.classList.remove('active'));
                this.classList.add('active');
                
                const lessonId = this.getAttribute('data-lesson');
                const title = this.querySelector('.lesson-title').textContent;
                document.getElementById('currentLessonTitle').textContent = title;
                showLesson(lessonId);
            });
        });

        // Navigation buttons
        document.getElementById('prevLesson').addEventListener('click', function() {
            const currentLesson = document.querySelector('.lesson-item.active');
            const prevLesson = currentLesson.previousElementSibling;
            if (prevLesson && prevLesson.classList.contains('lesson-item')) {
                currentLesson.classList.remove('active');
                prevLesson.classList.add('active');
                const lessonId = prevLesson.getAttribute('data-lesson');
                const title = prevLesson.querySelector('.lesson-title').textContent;
                document.getElementById('currentLessonTitle').textContent = title;
                showLesson(lessonId);
            }
        });

        document.getElementById('nextLesson').addEventListener('click', function() {
            const currentLesson = document.querySelector('.lesson-item.active');
            const nextLesson = currentLesson.nextElementSibling;
            if (nextLesson && nextLesson.classList.contains('lesson-item')) {
                currentLesson.classList.remove('active');
                nextLesson.classList.add('active');
                const lessonId = nextLesson.getAttribute('data-lesson');
                const title = nextLesson.querySelector('.lesson-title').textContent;
                document.getElementById('currentLessonTitle').textContent = title;
                showLesson(lessonId);
            }
        });

        // Show first lesson by default
        showLesson('1-1');
    </script>
</body>
</html>